(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},84762,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},78745,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["default",()=>t])},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},30374,e=>{"use strict";var t=e.i(43476),s=e.i(26999),a=e.i(95926),i=e.i(47163);function r({...e}){return(0,t.jsx)(s.Root,{"data-slot":"dialog",...e})}function l({...e}){return(0,t.jsx)(s.Trigger,{"data-slot":"dialog-trigger",...e})}function n({...e}){return(0,t.jsx)(s.Portal,{"data-slot":"dialog-portal",...e})}function d({className:e,...a}){return(0,t.jsx)(s.Overlay,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function o({className:e,children:r,showCloseButton:l=!0,...o}){return(0,t.jsxs)(n,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(s.Content,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...o,children:[r,l&&(0,t.jsxs)(s.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(a.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function x({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function m({className:e,...a}){return(0,t.jsx)(s.Title,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...a})}e.s(["Dialog",()=>r,"DialogContent",()=>o,"DialogFooter",()=>x,"DialogHeader",()=>c,"DialogTitle",()=>m,"DialogTrigger",()=>l])},9706,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),a=e.i(18566),i=e.i(7233),r=e.i(27612),l=e.i(70273),n=e.i(69638);let d=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=e.i(31278),c=e.i(67881),x=e.i(23750),m=e.i(70065),u=e.i(84762),h=e.i(62870),g=e.i(30374),p=e.i(54858),f=e.i(20682);let v="https://vurele-backend.onrender.com";function j(){let e=(0,a.useRouter)(),{toast:j}=(0,f.useToast)(),[y,w]=(0,s.useState)([]),[b,N]=(0,s.useState)([]),[k,C]=(0,s.useState)(!0),[_,T]=(0,s.useState)(!1),[S,z]=(0,s.useState)(!1),[A,D]=(0,s.useState)({product_id:"",reviewer_name:"",rating:5,review_text:""});(0,s.useEffect)(()=>{let t=(0,p.getCurrentUser)();t&&t.is_admin?Promise.all([P(),R()]):e.push("/login")},[e]);let P=async()=>{try{let e=await fetch(`${v}/api/admin/reviews`,{headers:{Authorization:`Bearer ${(0,p.getAuthToken)()}`}});e.ok&&w(await e.json())}catch{}finally{C(!1)}},R=async()=>{try{N(await p.productsAPI.getAll())}catch{}},$=async e=>{e.preventDefault(),T(!0);try{if(!(await fetch(`${v}/api/admin/reviews`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(0,p.getAuthToken)()}`},body:JSON.stringify({...A,product_id:parseInt(A.product_id)})})).ok)throw Error("Failed to create review");j({title:"Success",description:"Review created"}),z(!1),D({product_id:"",reviewer_name:"",rating:5,review_text:""}),P()}catch(e){j({title:"Error",description:e.message,variant:"destructive"})}finally{T(!1)}},B=async e=>{await fetch(`${v}/api/admin/reviews/${e.id}/verify`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(0,p.getAuthToken)()}`},body:JSON.stringify({verified:!e.is_verified})}),P()},M=async e=>{confirm("Delete this review?")&&(await fetch(`${v}/api/admin/reviews/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${(0,p.getAuthToken)()}`}}),P())};return k?(0,t.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,t.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin"})}):(0,t.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 sm:mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Reviews"}),(0,t.jsxs)("p",{className:"text-muted-foreground text-sm sm:text-base",children:["Manage product reviews (",y.filter(e=>!e.is_verified).length," pending)"]})]}),(0,t.jsxs)(g.Dialog,{open:S,onOpenChange:z,children:[(0,t.jsx)(g.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(c.Button,{children:[(0,t.jsx)(i.Plus,{className:"h-4 w-4 mr-2"})," Add Review"]})}),(0,t.jsxs)(g.DialogContent,{children:[(0,t.jsx)(g.DialogHeader,{children:(0,t.jsx)(g.DialogTitle,{children:"Add Review"})}),(0,t.jsxs)("form",{onSubmit:$,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Product"}),(0,t.jsxs)(h.Select,{value:A.product_id,onValueChange:e=>D({...A,product_id:e}),children:[(0,t.jsx)(h.SelectTrigger,{children:(0,t.jsx)(h.SelectValue,{placeholder:"Select product"})}),(0,t.jsx)(h.SelectContent,{children:b.map(e=>(0,t.jsx)(h.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Reviewer Name"}),(0,t.jsx)(x.Input,{value:A.reviewer_name,onChange:e=>D({...A,reviewer_name:e.target.value}),placeholder:"Customer Name",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Rating"}),(0,t.jsx)("div",{className:"flex gap-2 mt-1",children:[1,2,3,4,5].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>D({...A,rating:e}),children:(0,t.jsx)(l.Star,{className:`h-6 w-6 ${e<=A.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Review Text"}),(0,t.jsx)(u.Textarea,{value:A.review_text,onChange:e=>D({...A,review_text:e.target.value}),rows:3})]}),(0,t.jsxs)(c.Button,{type:"submit",className:"w-full",disabled:_||!A.product_id,children:[_?(0,t.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):null," Add Review"]})]})]})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:0===y.length?(0,t.jsx)(m.Card,{children:(0,t.jsx)(m.CardContent,{className:"py-12 text-center text-muted-foreground",children:"No reviews yet"})}):y.map(e=>{let s;return(0,t.jsx)(m.Card,{className:e.is_verified?"":"border-yellow-300 bg-yellow-50/50",children:(0,t.jsx)(m.CardContent,{className:"py-4 px-4 sm:px-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"font-semibold text-sm sm:text-base",children:e.reviewer_name}),(s=e.rating,(0,t.jsx)("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(e=>(0,t.jsx)(l.Star,{className:`h-4 w-4 ${e<=s?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},e))})),e.is_admin_review&&(0,t.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"Admin"}),!e.is_verified&&(0,t.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded",children:"Pending"})]}),(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground mb-1",children:["Product: ",e.product_name]}),(0,t.jsx)("p",{className:"text-xs sm:text-sm break-words",children:e.review_text||(0,t.jsx)("em",{className:"text-muted-foreground",children:"No review text"})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(e.created_at).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,t.jsxs)(c.Button,{variant:e.is_verified?"outline":"default",size:"sm",className:"text-xs sm:text-sm h-8 sm:h-9",onClick:()=>B(e),children:[e.is_verified?(0,t.jsx)(d,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}):(0,t.jsx)(n.CheckCircle,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:e.is_verified?"Unverify":"Verify"}),(0,t.jsx)("span",{className:"sm:hidden",children:e.is_verified?"X":"âœ“"})]}),(0,t.jsx)(c.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>M(e.id),children:(0,t.jsx)(r.Trash2,{className:"h-4 w-4"})})]})]})})},e.id)})})]})}e.s(["default",()=>j],9706)}]);