(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},23750,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function a({className:e,type:a,...i}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>a])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],69074)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},70065,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>r])},35804,e=>{"use strict";var t=e.i(71645),s=e.i(34620);function a(e){let[a,i]=t.useState(void 0);return(0,s.useLayoutEffect)(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let r=t[0];if("borderBoxSize"in r){let e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;i({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}i(void 0)},[e]),a}e.s(["useSize",()=>a])},99682,e=>{"use strict";var t=e.i(71645);function s(e){let s=t.useRef({value:e,previous:e});return t.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},19036,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(81140),i=e.i(20783),r=e.i(30030),n=e.i(69340),d=e.i(99682),l=e.i(35804),o=e.i(48425),c="Switch",[u,h]=(0,r.createContextScope)(c),[m,p]=u(c),f=s.forwardRef((e,r)=>{let{__scopeSwitch:d,name:l,checked:c,defaultChecked:u,required:h,disabled:p,value:f="on",onCheckedChange:x,form:v,...y}=e,[j,k]=s.useState(null),w=(0,i.useComposedRefs)(r,e=>k(e)),N=s.useRef(!1),C=!j||v||!!j.closest("form"),[S=!1,T]=(0,n.useControllableState)({prop:c,defaultProp:u,onChange:x});return(0,t.jsxs)(m,{scope:d,checked:S,disabled:p,children:[(0,t.jsx)(o.Primitive.button,{type:"button",role:"switch","aria-checked":S,"aria-required":h,"data-state":g(S),"data-disabled":p?"":void 0,disabled:p,value:f,...y,ref:w,onClick:(0,a.composeEventHandlers)(e.onClick,e=>{T(e=>!e),C&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),C&&(0,t.jsx)(b,{control:j,bubbles:!N.current,name:l,value:f,checked:S,required:h,disabled:p,form:v,style:{transform:"translateX(-100%)"}})]})});f.displayName=c;var x="SwitchThumb",v=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...i}=e,r=p(x,a);return(0,t.jsx)(o.Primitive.span,{"data-state":g(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:s})});v.displayName=x;var b=e=>{let{control:a,checked:i,bubbles:r=!0,...n}=e,o=s.useRef(null),c=(0,d.usePrevious)(i),u=(0,l.useSize)(a);return s.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==i&&t){let s=new Event("click",{bubbles:r});t.call(e,i),e.dispatchEvent(s)}},[c,i,r]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...n,tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function g(e){return e?"checked":"unchecked"}var y=e.i(47163);function j({className:e,...s}){return(0,t.jsx)(f,{"data-slot":"switch",className:(0,y.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,t.jsx)(v,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}e.s(["Switch",()=>j],19036)},87866,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),i=e.i(56909),r=e.i(7233),n=e.i(27612),d=e.i(69074),l=e.i(31278),o=e.i(78716),c=e.i(67881),u=e.i(23750),h=e.i(70065),m=e.i(19036),p=e.i(54858),f=e.i(20682);function x(){let e=(0,a.useRouter)(),{toast:x}=(0,f.useToast)(),[v,b]=(0,s.useState)(!0),[g,y]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)({enabled:!0,title:"What Our Fellows Say",videos:[]}),C=(0,s.useRef)({});(0,s.useEffect)(()=>{let t=(0,p.getCurrentUser)();t&&t.is_admin?p.settingsAPI.getTestimonials().then(e=>N(e)).catch(()=>{}).finally(()=>b(!1)):e.push("/login")},[e]);let S=async e=>{let t=new FormData;t.append("file",e);try{let e=await fetch("https://vurele-backend.onrender.com/api/upload/video",{method:"POST",headers:{Authorization:`Bearer ${(0,p.getAuthToken)()}`},body:t});if(!e.ok)throw Error("Upload failed");return(await e.json()).url}catch{return x({title:"Upload failed",variant:"destructive"}),null}},T=async(e,t)=>{let s=e.target.files?.[0];if(!s)return;k(!0);let a=await S(s);a&&P(t,"video_url",a),k(!1)},P=(e,t,s)=>{N(a=>({...a,videos:a.videos.map((a,i)=>i===e?{...a,[t]:s}:a)}))},z=async()=>{y(!0);try{await p.settingsAPI.updateTestimonials(w),x({title:"Success",description:"Settings saved"})}catch(e){x({title:"Error",description:e.message,variant:"destructive"})}finally{y(!1)}};return v?(0,t.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,t.jsx)("p",{children:"Loading..."})}):(0,t.jsxs)("div",{className:"p-8 max-w-4xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Testimonials"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:'Manage "What Our Fellows Say" video section'})]}),(0,t.jsxs)(c.Button,{onClick:z,disabled:g,children:[(0,t.jsx)(i.Save,{className:"h-4 w-4 mr-2"}),g?"Saving...":"Save"]})]}),(0,t.jsxs)(h.Card,{className:"mb-6",children:[(0,t.jsx)(h.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Video,{className:"h-5 w-5"})," Testimonial Videos"]}),(0,t.jsx)(h.CardDescription,{children:"Customer video testimonials displayed on homepage"})]}),(0,t.jsx)(m.Switch,{checked:w.enabled,onCheckedChange:e=>N(t=>({...t,enabled:e}))})]})}),(0,t.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Section Title"}),(0,t.jsx)(u.Input,{value:w.title,onChange:e=>N(t=>({...t,title:e.target.value}))})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(c.Button,{onClick:()=>N(e=>({...e,videos:[...e.videos,{name:"",video_url:""}]})),size:"sm",children:[(0,t.jsx)(r.Plus,{className:"h-4 w-4 mr-1"})," Add Video"]})}),w.videos.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-3 bg-muted/30",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"font-medium",children:["Video ",s+1]}),(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:()=>N(e=>({...e,videos:e.videos.filter((e,t)=>t!==s)})),className:"text-red-600",children:(0,t.jsx)(n.Trash2,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Customer Name"}),(0,t.jsx)(u.Input,{value:e.name,onChange:e=>P(s,"name",e.target.value),placeholder:"John Doe"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Video URL"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"file",ref:e=>{C.current[s]=e},accept:"video/*",className:"hidden",onChange:e=>T(e,s)}),(0,t.jsxs)(c.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>C.current[s]?.click(),disabled:j,children:[j?(0,t.jsx)(l.Loader2,{className:"w-4 h-4 mr-1 animate-spin"}):(0,t.jsx)(d.Upload,{className:"w-4 h-4 mr-1"})," Upload"]}),(0,t.jsx)(u.Input,{placeholder:"Or paste video URL",value:e.video_url,onChange:e=>P(s,"video_url",e.target.value),className:"flex-1"})]}),e.video_url&&(0,t.jsx)("video",{src:e.video_url,controls:!0,className:"mt-2 w-full max-w-sm rounded-lg"})]})]},s)),0===w.videos.length&&(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:'No videos. Click "Add Video" to add testimonials.'})]})]})]})}e.s(["default",()=>x])}]);