(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56909,e=>{"use strict";let t=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},23750,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function i({className:e,type:i,...a}){return(0,t.jsx)("input",{type:i,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}e.s(["Input",()=>i])},70065,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function i({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...i})}function a({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...i})}function s({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...i})}function n({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...i})}function d({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...i})}e.s(["Card",()=>i,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>a,"CardTitle",()=>s])},35804,e=>{"use strict";var t=e.i(71645),r=e.i(34620);function i(e){let[i,a]=t.useState(void 0);return(0,r.useLayoutEffect)(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,i;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,i=t.blockSize}else r=e.offsetWidth,i=e.offsetHeight;a({width:r,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}a(void 0)},[e]),i}e.s(["useSize",()=>i])},99682,e=>{"use strict";var t=e.i(71645);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},19036,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(81140),a=e.i(20783),s=e.i(30030),n=e.i(69340),d=e.i(99682),o=e.i(35804),l=e.i(48425),c="Switch",[u,h]=(0,s.createContextScope)(c),[p,f]=u(c),x=r.forwardRef((e,s)=>{let{__scopeSwitch:d,name:o,checked:c,defaultChecked:u,required:h,disabled:f,value:x="on",onCheckedChange:m,form:v,...y}=e,[j,k]=r.useState(null),w=(0,a.useComposedRefs)(s,e=>k(e)),S=r.useRef(!1),N=!j||v||!!j.closest("form"),[C=!1,T]=(0,n.useControllableState)({prop:c,defaultProp:u,onChange:m});return(0,t.jsxs)(p,{scope:d,checked:C,disabled:f,children:[(0,t.jsx)(l.Primitive.button,{type:"button",role:"switch","aria-checked":C,"aria-required":h,"data-state":g(C),"data-disabled":f?"":void 0,disabled:f,value:x,...y,ref:w,onClick:(0,i.composeEventHandlers)(e.onClick,e=>{T(e=>!e),N&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})}),N&&(0,t.jsx)(b,{control:j,bubbles:!S.current,name:o,value:x,checked:C,required:h,disabled:f,form:v,style:{transform:"translateX(-100%)"}})]})});x.displayName=c;var m="SwitchThumb",v=r.forwardRef((e,r)=>{let{__scopeSwitch:i,...a}=e,s=f(m,i);return(0,t.jsx)(l.Primitive.span,{"data-state":g(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:r})});v.displayName=m;var b=e=>{let{control:i,checked:a,bubbles:s=!0,...n}=e,l=r.useRef(null),c=(0,d.usePrevious)(a),u=(0,o.useSize)(i);return r.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==a&&t){let r=new Event("click",{bubbles:s});t.call(e,a),e.dispatchEvent(r)}},[c,a,s]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:l,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function g(e){return e?"checked":"unchecked"}var y=e.i(47163);function j({className:e,...r}){return(0,t.jsx)(x,{"data-slot":"switch",className:(0,y.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(v,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}e.s(["Switch",()=>j],19036)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},84762,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function i({className:e,...i}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...i})}e.s(["Textarea",()=>i])},69074,e=>{"use strict";let t=(0,e.i(75254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],69074)},32582,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(18566),a=e.i(56909),s=e.i(69074),n=e.i(31278),d=e.i(78716),o=e.i(67881),l=e.i(23750),c=e.i(70065),u=e.i(19036),h=e.i(84762),p=e.i(54858),f=e.i(20682);function x(){let e=(0,i.useRouter)(),{toast:x}=(0,f.useToast)(),[m,v]=(0,r.useState)(!0),[b,g]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),k=(0,r.useRef)(null),[w,S]=(0,r.useState)({enabled:!0,title:"Our Story",description:"",video_url:""});(0,r.useEffect)(()=>{let t=(0,p.getCurrentUser)();t&&t.is_admin?p.settingsAPI.getOurStory().then(S).catch(()=>{}).finally(()=>v(!1)):e.push("/login")},[e]);let N=async e=>{let t=new FormData;t.append("file",e);try{let e=await fetch("https://vurele-backend.onrender.com/api/upload/video",{method:"POST",headers:{Authorization:`Bearer ${(0,p.getAuthToken)()}`},body:t});if(!e.ok)throw Error("Upload failed");return(await e.json()).url}catch{return x({title:"Upload failed",variant:"destructive"}),null}},C=async e=>{let t=e.target.files?.[0];if(!t)return;j(!0);let r=await N(t);r&&S(e=>({...e,video_url:r})),j(!1)},T=async()=>{g(!0);try{await p.settingsAPI.updateOurStory(w),x({title:"Success",description:"Settings saved"})}catch(e){x({title:"Error",description:e.message,variant:"destructive"})}finally{g(!1)}};return m?(0,t.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,t.jsx)("p",{children:"Loading..."})}):(0,t.jsxs)("div",{className:"p-8 max-w-3xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Our Story"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage the Our Story video section on homepage"})]}),(0,t.jsxs)(o.Button,{onClick:T,disabled:b,children:[(0,t.jsx)(a.Save,{className:"h-4 w-4 mr-2"}),b?"Saving...":"Save"]})]}),(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Video,{className:"h-5 w-5"})," Video Section"]}),(0,t.jsx)(c.CardDescription,{children:"Long format video displayed in the Our Story section"})]}),(0,t.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:"Enable Section"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Show/hide on homepage"})]}),(0,t.jsx)(u.Switch,{checked:w.enabled,onCheckedChange:e=>S(t=>({...t,enabled:e}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Section Title"}),(0,t.jsx)(l.Input,{value:w.title,onChange:e=>S(t=>({...t,title:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Description"}),(0,t.jsx)(h.Textarea,{value:w.description,onChange:e=>S(t=>({...t,description:e.target.value})),rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Video URL (Long Format 16:9)"}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,t.jsx)("input",{type:"file",ref:k,accept:"video/*",className:"hidden",onChange:C}),(0,t.jsxs)(o.Button,{type:"button",variant:"outline",onClick:()=>k.current?.click(),disabled:y,children:[y?(0,t.jsx)(n.Loader2,{className:"w-4 h-4 mr-1 animate-spin"}):(0,t.jsx)(s.Upload,{className:"w-4 h-4 mr-1"})," Upload Video"]}),(0,t.jsx)(l.Input,{placeholder:"Or paste video URL",value:w.video_url,onChange:e=>S(t=>({...t,video_url:e.target.value})),className:"flex-1"})]}),w.video_url&&(0,t.jsx)("div",{className:"rounded-lg overflow-hidden bg-black aspect-video",children:(0,t.jsx)("video",{src:w.video_url,controls:!0,className:"w-full h-full"})})]})]})]})]})}e.s(["default",()=>x])}]);