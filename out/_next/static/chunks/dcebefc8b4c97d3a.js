(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84762,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},78745,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["default",()=>t])},86318,e=>{"use strict";var t=e.i(71645);e.i(43476);var a=t.createContext(void 0);function s(e){let s=t.useContext(a);return e||s||"ltr"}e.s(["useDirection",()=>s])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},30374,e=>{"use strict";var t=e.i(43476),a=e.i(26999),s=e.i(95926),i=e.i(47163);function r({...e}){return(0,t.jsx)(a.Root,{"data-slot":"dialog",...e})}function n({...e}){return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...e})}function l({...e}){return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...e})}function o({className:e,...s}){return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function d({className:e,children:r,showCloseButton:n=!0,...d}){return(0,t.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,t.jsx)(o,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...d,children:[r,n&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(s.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function u({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function x({className:e,...s}){return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...s})}e.s(["Dialog",()=>r,"DialogContent",()=>d,"DialogFooter",()=>u,"DialogHeader",()=>c,"DialogTitle",()=>x,"DialogTrigger",()=>n])},88511,e=>{"use strict";let t=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},27497,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),i=e.i(7233),r=e.i(88511),n=e.i(27612),l=e.i(75254);let o=(0,l.default)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),d=(0,l.default)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);var c=e.i(63059);let u=(0,l.default)("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var x=e.i(67881),g=e.i(23750),m=e.i(70065),h=e.i(30374),p=e.i(84762),v=e.i(62870),f=e.i(54858),y=e.i(20682);function j(){let e=(0,s.useRouter)(),{toast:l}=(0,y.useToast)(),[j,b]=(0,a.useState)([]),[N,C]=(0,a.useState)(!0),[w,k]=(0,a.useState)(!1),[_,S]=(0,a.useState)(null),[T,D]=(0,a.useState)({name:"",description:"",parent_id:null});(0,a.useEffect)(()=>{let t=(0,f.getCurrentUser)();t&&t.is_admin?A():e.push("/login")},[e]);let A=async()=>{try{let e=await f.categoriesAPI.adminGetAll();b(e)}catch(t){t.message?.includes("401")?(f.authAPI.logout(),e.push("/login")):l({title:"Error",description:"Failed to load categories",variant:"destructive"})}finally{C(!1)}},P=j.filter(e=>!e.parent_id),z=e=>j.filter(t=>t.parent_id===e),B=async e=>{e.preventDefault();try{_?(await f.categoriesAPI.update(_.id,T),l({title:"Success",description:"Category updated"})):(await f.categoriesAPI.create(T),l({title:"Success",description:T.parent_id?"Subcategory created":"Category created"})),k(!1),S(null),D({name:"",description:"",parent_id:null}),A()}catch(e){l({title:"Error",description:e.message||"Failed to save category",variant:"destructive"})}},I=e=>{S(e),D({name:e.name,description:e.description||"",parent_id:e.parent_id||null}),k(!0)},M=async e=>{let t=z(e);if(t.length>0){if(!confirm(`This will delete the category and its ${t.length} subcategories. Continue?`))return}else if(!confirm("Delete this category?"))return;try{await f.categoriesAPI.delete(e),l({title:"Success",description:"Category deleted"}),A()}catch(e){l({title:"Error",description:e.message,variant:"destructive"})}},E=async e=>{try{await f.categoriesAPI.update(e.id,{is_active:!e.is_active}),l({title:"Success",description:`Category ${e.is_active?"disabled":"enabled"}`}),A()}catch(e){l({title:"Error",description:e.message,variant:"destructive"})}};return N?(0,t.jsx)("div",{className:"p-8 flex items-center justify-center min-h-screen",children:(0,t.jsx)("p",{children:"Loading..."})}):(0,t.jsxs)("div",{className:"p-4 sm:p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Categories"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage product categories and subcategories"})]}),(0,t.jsxs)(x.Button,{onClick:()=>{D({name:"",description:"",parent_id:null}),S(null),k(!0)},children:[(0,t.jsx)(i.Plus,{className:"h-4 w-4 mr-2"})," Add Category"]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[P.map(e=>{let a=z(e.id);return(0,t.jsxs)(m.Card,{className:e.is_active?"":"opacity-60",children:[(0,t.jsx)(m.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(m.CardTitle,{className:"text-lg flex items-center gap-2",children:[e.name,a.length>0&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground font-normal",children:["(",a.length," subcategories)"]})]}),(0,t.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:e.is_active?"Active":"Inactive"})]})}),(0,t.jsxs)(m.CardContent,{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:e.description||"No description"}),a.length>0&&(0,t.jsx)("div",{className:"mb-4 pl-4 border-l-2 border-muted space-y-2",children:a.map(e=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-2 rounded-lg bg-muted/50 ${!e.is_active?"opacity-60":""}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.ChevronRight,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,t.jsx)("span",{className:`px-1.5 py-0.5 text-[10px] rounded ${e.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:e.is_active?"Active":"Inactive"})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(x.Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>E(e),children:e.is_active?(0,t.jsx)(d,{className:"h-3 w-3"}):(0,t.jsx)(o,{className:"h-3 w-3"})}),(0,t.jsx)(x.Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>I(e),children:(0,t.jsx)(r.Edit,{className:"h-3 w-3"})}),(0,t.jsx)(x.Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-red-600",onClick:()=>M(e.id),children:(0,t.jsx)(n.Trash2,{className:"h-3 w-3"})})]})]},e.id))}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(x.Button,{variant:"outline",size:"sm",onClick:()=>{var t;return t=e.id,void(S(null),D({name:"",description:"",parent_id:t}),k(!0))},children:[(0,t.jsx)(u,{className:"h-4 w-4 mr-1"})," Add Subcategory"]}),(0,t.jsxs)(x.Button,{variant:"outline",size:"sm",onClick:()=>E(e),children:[e.is_active?(0,t.jsx)(d,{className:"h-4 w-4 mr-1"}):(0,t.jsx)(o,{className:"h-4 w-4 mr-1"}),e.is_active?"Disable":"Enable"]}),(0,t.jsxs)(x.Button,{variant:"outline",size:"sm",onClick:()=>I(e),children:[(0,t.jsx)(r.Edit,{className:"h-4 w-4 mr-1"})," Edit"]}),(0,t.jsx)(x.Button,{variant:"outline",size:"sm",onClick:()=>M(e.id),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(n.Trash2,{className:"h-4 w-4"})})]})]})]},e.id)}),0===P.length&&(0,t.jsx)(m.Card,{children:(0,t.jsx)(m.CardContent,{className:"py-8 text-center text-muted-foreground",children:"No categories yet. Create your first category to get started."})})]}),(0,t.jsx)(h.Dialog,{open:w,onOpenChange:k,children:(0,t.jsxs)(h.DialogContent,{children:[(0,t.jsx)(h.DialogHeader,{children:(0,t.jsx)(h.DialogTitle,{children:_?"Edit Category":T.parent_id?"Add Subcategory":"Add Category"})}),(0,t.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[!_&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Parent Category (optional)"}),(0,t.jsxs)(v.Select,{value:T.parent_id?.toString()||"none",onValueChange:e=>D({...T,parent_id:"none"===e?null:parseInt(e)}),children:[(0,t.jsx)(v.SelectTrigger,{children:(0,t.jsx)(v.SelectValue,{placeholder:"Select parent (or leave empty for main category)"})}),(0,t.jsxs)(v.SelectContent,{children:[(0,t.jsx)(v.SelectItem,{value:"none",children:"No Parent (Main Category)"}),P.map(e=>(0,t.jsx)(v.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-1 block",children:T.parent_id?"Subcategory Name *":"Category Name *"}),(0,t.jsx)(g.Input,{value:T.name,onChange:e=>D({...T,name:e.target.value}),placeholder:T.parent_id?"e.g. T-Shirts, Blouses":"e.g. Tops, Dresses",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Description"}),(0,t.jsx)(p.Textarea,{value:T.description,onChange:e=>D({...T,description:e.target.value}),placeholder:"Optional description",rows:3})]}),(0,t.jsxs)(h.DialogFooter,{children:[(0,t.jsx)(x.Button,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,t.jsx)(x.Button,{type:"submit",children:_?"Update":"Create"})]})]})]})})]})}e.s(["default",()=>j],27497)}]);